{% extends "base.html" %}

{% block title %}In√≠cio - Portf√≥lio Ra√≠ Carvalho{% endblock %}

{% block content %}
<div class="homepage-wrapper">
    <!-- Hero Section - Redesigned for better spacing -->
    <section class="hero-section-clean" id="inicio">
        <div class="container">
            <div class="row align-items-center hero-row">
                <div class="col-lg-6">
                    <div class="hero-content-modern">
                        <div class="greeting-wrapper">
                            <span class="greeting-emoji">üëã</span>
                            <span class="greeting-text">HELLO WORLD</span>
                        </div>
                        
                        <h1 class="hero-main-title">
                            EU SOU O <span class="name-highlight">RA√ç CARVALHO</span><br>
                            <span class="location-text">DESENVOLVEDOR FULL-STACK</span>
                        </h1>
                        
                        <div class="hero-description">
                            <p class="description-primary">
                                Desenvolvedor full-stack apaixonado por tecnologia e inova√ß√£o.
                            </p>
                            <p class="description-secondary">
                                Transformo ideias em solu√ß√µes digitais eficientes, navegando pelo 
                                vasto universo da programa√ß√£o com criatividade e expertise t√©cnica.
                            </p>
                        </div>
                        
                        <div class="hero-actions">
                            <a href="#" class="btn-contact-hero" onclick="downloadCV()">
                                <i class="fas fa-download me-2"></i>Curr√≠culo
                            </a>
                            <a href="#projetos" class="btn-projects-hero">
                                <i class="fas fa-satellite me-2"></i>Projetos
                            </a>
                        </div>
                        
                        <!-- Social Links -->
                        <div class="hero-social-links">
                            <a href="https://github.com/Rai123100" target="_blank" class="social-link-hero">
                                <i class="fab fa-github"></i>
                            </a>
                            <a href="https://linkedin.com/in/rai-carvalho" target="_blank" class="social-link-hero">
                                <i class="fab fa-linkedin"></i>
                            </a>
                            <a href="#" target="_blank" class="social-link-hero">
                                <i class="fab fa-instagram"></i>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="hero-character-section">
                        <div class="character-container-hero">
                            <img src="{{ url_for('static', filename='images/profile-astronaut.svg') }}" 
                                 alt="Ra√≠ Carvalho - Astronauta Developer" class="hero-character-img">
                            <div class="character-glow-hero"></div>
                            
                            <!-- Floating space elements -->
                            <div class="space-elements">
                                <div class="orbit-ring-hero orbit-1"></div>
                                <div class="orbit-ring-hero orbit-2"></div>
                                <div class="floating-star-hero star-1"></div>
                                <div class="floating-star-hero star-2"></div>
                                <div class="floating-dot-hero dot-1"></div>
                                <div class="floating-dot-hero dot-2"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Skills Section - Fixed and improved -->
    <section class="skills-section-redesigned" id="ferramentas">
        <div class="container">
            <div class="skills-header text-center mb-5">
                <h2 class="skills-title">FERRAMENTAS</h2>
            </div>
            
            <div class="skills-carousel-modern">
                <div class="skills-track" id="skillsTrack">
                    <div class="skill-card" data-skill="python">
                        <div class="skill-icon">
                            <i class="fab fa-python"></i>
                        </div>
                        <span class="skill-name">Python</span>
                    </div>
                    <div class="skill-card active" data-skill="javascript">
                        <div class="skill-icon">
                            <i class="fab fa-js-square"></i>
                        </div>
                        <span class="skill-name">JavaScript</span>
                    </div>
                    <div class="skill-card" data-skill="react">
                        <div class="skill-icon">
                            <i class="fab fa-react"></i>
                        </div>
                        <span class="skill-name">React</span>
                    </div>
                    <div class="skill-card" data-skill="database">
                        <div class="skill-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <span class="skill-name">PostgreSQL</span>
                    </div>
                    <div class="skill-card" data-skill="flask">
                        <div class="skill-icon">
                            <i class="fab fa-python"></i>
                        </div>
                        <span class="skill-name">Flask</span>
                    </div>
                </div>
                
                <!-- Carousel Controls -->
                <button class="carousel-control prev-control" id="prevBtn">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-control next-control" id="nextBtn">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <!-- Carousel indicators -->
            <div class="carousel-indicators">
                <span class="indicator" data-slide="0"></span>
                <span class="indicator active" data-slide="1"></span>
                <span class="indicator" data-slide="2"></span>
                <span class="indicator" data-slide="3"></span>
                <span class="indicator" data-slide="4"></span>
            </div>
        </div>
    </section>

    <!-- About Preview Section - Properly spaced -->
    <section class="about-preview-section" id="sobre">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <div class="about-preview-content">
                        <h2 class="about-preview-title">
                            <i class="fas fa-user-astronaut me-3"></i>SOBRE MIM
                        </h2>
                        
                        <div class="about-preview-text">
                            <p class="preview-description">
                                Desenvolvedor apaixonado por tecnologia e inova√ß√£o, com experi√™ncia 
                                em desenvolvimento web full-stack. Sempre explorando novas fronteiras 
                                digitais e transformando ideias em solu√ß√µes criativas.
                            </p>
                        </div>
                        
                        <div class="about-preview-cta">
                            <a href="{{ url_for('about') }}" class="btn-discover">
                                <i class="fas fa-rocket me-2"></i>DESCOBRIR MAIS
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Improved Skills Carousel JavaScript -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const skillCards = document.querySelectorAll('.skill-card');
        const indicators = document.querySelectorAll('.indicator');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const skillsTrack = document.getElementById('skillsTrack');
        
        let currentIndex = 1; // Start with JavaScript as active
        let autoRotateInterval;
        
        function updateCarousel(index) {
            // Remove active class from all cards and indicators
            skillCards.forEach(card => card.classList.remove('active'));
            indicators.forEach(indicator => indicator.classList.remove('active'));
            
            // Add active class to current items
            if (skillCards[index]) {
                skillCards[index].classList.add('active');
            }
            if (indicators[index]) {
                indicators[index].classList.add('active');
            }
            
            // Smooth track movement - center the active card
            if (skillsTrack && skillCards[index]) {
                const cardWidth = skillCards[index].offsetWidth;
                const gap = 32; // 2rem gap
                const totalWidth = cardWidth + gap;
                const centerOffset = (skillsTrack.parentElement.offsetWidth / 2) - (cardWidth / 2);
                const translateX = centerOffset - (index * totalWidth);
                
                skillsTrack.style.transform = `translateX(${translateX}px)`;
            }
            
            currentIndex = index;
        }
        
        function nextSlide() {
            const nextIndex = (currentIndex + 1) % skillCards.length;
            updateCarousel(nextIndex);
        }
        
        function prevSlide() {
            const prevIndex = (currentIndex - 1 + skillCards.length) % skillCards.length;
            updateCarousel(prevIndex);
        }
        
        function startAutoRotate() {
            autoRotateInterval = setInterval(nextSlide, 4000);
        }
        
        function stopAutoRotate() {
            clearInterval(autoRotateInterval);
        }
        
        // Event listeners
        if (nextBtn) {
            nextBtn.addEventListener('click', () => {
                stopAutoRotate();
                nextSlide();
                setTimeout(startAutoRotate, 6000); // Restart after 6 seconds
            });
        }
        
        if (prevBtn) {
            prevBtn.addEventListener('click', () => {
                stopAutoRotate();
                prevSlide();
                setTimeout(startAutoRotate, 6000);
            });
        }
        
        // Indicator clicks
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => {
                stopAutoRotate();
                updateCarousel(index);
                setTimeout(startAutoRotate, 6000);
            });
        });
        
        // Card clicks
        skillCards.forEach((card, index) => {
            card.addEventListener('click', () => {
                stopAutoRotate();
                updateCarousel(index);
                setTimeout(startAutoRotate, 6000);
            });
        });
        
        // Initialize carousel position
        updateCarousel(currentIndex);
        
        // Start auto rotation
        startAutoRotate();
        
        // Pause on hover
        const carousel = document.querySelector('.skills-carousel-modern');
        if (carousel) {
            carousel.addEventListener('mouseenter', stopAutoRotate);
            carousel.addEventListener('mouseleave', startAutoRotate);
        }
        
        // Handle window resize
        window.addEventListener('resize', () => {
            updateCarousel(currentIndex);
        });
    });
    
    // CV Download Function
    function downloadCV() {
        // Create a temporary download link
        const link = document.createElement('a');
        link.href = '#'; // Replace with actual CV file path when available
        link.download = 'Rai_Carvalho_CV.pdf';
        
        // For now, show a message to the user
        alert('Curr√≠culo ser√° disponibilizado em breve! Entre em contato para solicitar: raicarvalho343@gmail.com');
    }
    </script>

    <!-- Projetos Section -->
    <section class="projects-section py-5 bg-dark-secondary" id="projetos">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="display-5 fw-bold text-gradient">
                    <i class="fas fa-satellite me-3"></i>Meus Projetos
                </h2>
                <p class="lead text-muted">Miss√µes destacadas da minha jornada digital</p>
            </div>

            {% if featured_projects %}
            <div class="row">
                {% for project in featured_projects %}
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="project-card card h-100">
                        <div class="card-img-wrapper">
                            <img src="{{ url_for('static', filename='uploads/' + project.image) }}" 
                                 class="card-img-top" alt="{{ project.title }}">
                            <div class="card-overlay">
                                <div class="overlay-content">
                                    <a href="{{ url_for('project_detail', project_id=project.id) }}" 
                                       class="btn btn-primary">
                                        <i class="fas fa-eye me-2"></i>Ver Projeto
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ project.title }}</h5>
                            <p class="card-text text-muted flex-grow-1">{{ project.short_description }}</p>
                            <div class="project-meta">
                                <div class="project-stats">
                                    <span class="badge bg-primary me-2">
                                        <i class="fas fa-heart me-1"></i>{{ project.like_count }}
                                    </span>
                                    <span class="badge bg-secondary">
                                        <i class="fas fa-comments me-1"></i>{{ project.comment_count }}
                                    </span>
                                </div>
                                {% if project.tag_list %}
                                <div class="project-tags mt-2">
                                    {% for tag in project.tag_list[:3] %}
                                    <span class="tag-badge">{{ tag }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            {% else %}
            <div class="row">
                <div class="col-12 text-center">
                    <div class="no-projects-message">
                        <i class="fas fa-satellite fa-4x text-muted mb-4"></i>
                        <h4 class="text-muted">Nenhum projeto em destaque ainda</h4>
                        <p class="text-muted">Em breve novos projetos ser√£o adicionados ao portf√≥lio!</p>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <!-- View All Projects Button -->
            <div class="text-center mt-5">
                <a href="{{ url_for('projects') }}" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-satellite me-2"></i>Ver Todos os Projetos
                </a>
            </div>
        </div>
    </section>



    <!-- Conquistas Section -->
    {% if achievements %}
    <section class="achievements py-5">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="display-5 fw-bold text-gradient">
                    <i class="fas fa-trophy me-3"></i>Conquistas
                </h2>
                <p class="lead text-muted">Marcos alcan√ßados na minha jornada c√≥smica</p>
            </div>
            
            <div class="row">
                {% for achievement in achievements %}
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="achievement-card text-center">
                        <div class="achievement-icon">
                            <i class="fas fa-{{ achievement.icon }}"></i>
                        </div>
                        <h5 class="achievement-title">{{ achievement.title }}</h5>
                        <p class="achievement-description text-muted">{{ achievement.description }}</p>
                        {% if achievement.date_achieved %}
                        <small class="achievement-date text-primary">
                            {{ achievement.date_achieved.strftime('%B %Y') }}
                        </small>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Call to Action Section -->
    <section class="cta-section py-5" id="contato">
        <div class="container">
            <div class="row justify-content-center text-center">
                <div class="col-lg-10">
                    <h2 class="display-5 fw-bold text-white mb-4">
                        Pronto para Lan√ßar Seu Pr√≥ximo Projeto?
                    </h2>
                    <p class="lead text-muted mb-5">
                        Vamos colaborar e criar algo incr√≠vel juntos no universo digital!
                    </p>
                    
                    <!-- Contact Methods -->
                    <div class="contact-methods mb-5">
                        <div class="row g-4">
                            <div class="col-lg-3 col-md-6">
                                <a href="mailto:raicarvalho343@gmail.com" class="contact-card">
                                    <i class="fas fa-envelope contact-icon"></i>
                                    <h5>Email</h5>
                                    <p>raicarvalho343@gmail.com</p>
                                </a>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <a href="https://github.com/Rai123100" target="_blank" class="contact-card">
                                    <i class="fab fa-github contact-icon"></i>
                                    <h5>GitHub</h5>
                                    <p>@Rai123100</p>
                                </a>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <a href="https://linkedin.com/in/rai-carvalho" target="_blank" class="contact-card">
                                    <i class="fab fa-linkedin contact-icon"></i>
                                    <h5>LinkedIn</h5>
                                    <p>Ra√≠ Carvalho</p>
                                </a>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <a href="#" target="_blank" class="contact-card">
                                    <i class="fab fa-instagram contact-icon"></i>
                                    <h5>Instagram</h5>
                                    <p>@rai_carvalho</p>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cta-buttons">
                        <a href="mailto:raicarvalho343@gmail.com" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-envelope me-2"></i>Entre em Contato
                        </a>
                        <a href="https://github.com/Rai123100" target="_blank" class="btn btn-outline-primary btn-lg">
                            <i class="fab fa-github me-2"></i>Ver GitHub
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block scripts %}
<script>
// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});

// Add floating animation to hero elements
const floatingElements = document.querySelectorAll('.floating-elements i');
floatingElements.forEach((element, index) => {
    element.style.animationDelay = `${index * 0.5}s`;
});

// Typewriter effect for the hero subtitle
function typeWriter(element, text, speed = 100) {
    let i = 0;
    element.innerHTML = '';
    
    function type() {
        if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, speed);
        }
    }
    type();
}

// Initialize typewriter effect
document.addEventListener('DOMContentLoaded', function() {
    const typewriterElement = document.querySelector('.typewriter');
    if (typewriterElement) {
        const text = typewriterElement.textContent;
        setTimeout(() => {
            typeWriter(typewriterElement, text, 150);
        }, 1000);
    }
});

// Add scroll animations
window.addEventListener('scroll', function() {
    const scrolled = window.pageYOffset;
    const parallax = document.querySelector('.hero-section');
    if (parallax) {
        const speed = scrolled * 0.5;
        parallax.style.transform = `translateY(${speed}px)`;
    }
});
</script>
{% endblock %}
